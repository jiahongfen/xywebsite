<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="" />
<meta name="author" content="" />
<link rel="icon" href="../../../favicon.ico" />

<title th:text="${product.name}"></title>

<!-- Bootstrap core CSS -->
<link href="../../../resources/css/bootstrap.min.css" rel="stylesheet" th:href="@{/resources/css/bootstrap.min.css}" />

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<link href="../../../resources/css/ie10-viewport-bug-workaround.css" rel="stylesheet" th:href="@{/resources/css/ie10-viewport-bug-workaround.css}" />

<!-- Custom styles for this project -->
<link href="../../../resources/css/core.css" rel="stylesheet" th:href="@{/resources/css/core.css}" />

<!-- Link Swiper's CSS -->
<link href="../../../resources/css/swiper.min.css" rel="stylesheet" th:href="@{/resources/css/swiper.min.css}" />

<link href="../../../resources/css/details.css" rel="stylesheet" th:href="@{/resources/css/details.css}" />
</head>

<body>

    <div th:replace="fragments/header :: header">Header</div>
    <div class="container">
        <div class="jumbotron" style="background-color: white;">
            <h2 style="margin-top: 0" th:text="${product.name}">Title</h2>
            <div class="row">
                <div class="col-md-6">
                    <!-- Swiper -->
                    <div class="swiper-container">
                        <div class="swiper-wrapper" th:each="slide : ${product.slides}" >
                            <div class="swiper-slide slide" th:style="'background-image: url(' + ${slide.image} + ');'"></div>
                        </div>
                        <!-- Add Pagination -->
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <br/>
                    <span th:utext="${product.brief}"></span>
                    <br/>
                    <br/>
                    行程亮点<br/>
                    <span th:utext="${product.highlights}"></span>
                    <br/>
                    <br/>
                    <table>
                        <tr>
                            <td><span style="color: #1DB5FF;">¥ </span><span style="font-size: xx-large; color: #1DB5FF; font-weight: bold;" th:text="${product.fee}"></span><span style="color: #999; padding-right: 10px"> 起/人</span></td>
                            <td><button class="btn order-button" style="font-size: medium" onclick="order('1')">立即预定</button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <table class="sub-title">
                    <tr>
                        <td><h4 style="padding-left: 15px; color: white;">行程介绍</h4></td>
                        <td style="text-align: right" height="50px"><button class="btn order-button" style="height: 100%; display: none;">立即预定</button></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="jour-plan">
            <div class="row" th:each="day,iterStat : ${product.journey}">
                <div class="col-md-6">
                    <span class="day-icon"></span>
                    <div><span style="font-size: x-large; color: #1DB5FF; font-weight: bolder;" th:text="${day.index} + 'Day'">Day</span> <span th:utext="${day.title}"></span></div>
                    <div th:utext="${day.details}"></div>
                </div>
                <div class="col-md-6">
                    <div class="col-md-6 jour-pic-wrapper" th:each="picture : ${day.pictures}" style="padding: 5px;"><img alt="" th:src="${picture.value}" width="100%" height="auto" /><br/><div class=''>
                        <p class='jour-pic-desc-content' th:text="${picture.key}"></p>
                    </div></div>
                </div>
                <hr style="clear: both;" th:if="${!iterStat.last}" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-md-12">
                <table class="sub-title">
                    <tr>
                        <td><h4 style="padding-left: 15px; color: white;">费用说明</h4></td>
                        <td style="text-align: right" height="50px"><button class="btn order-button" style="height: 100%; display: none;">立即预定</button></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="fee-plan" th:utext="${product.feePlan}"></div>
    </div>
    <a href="#" class="back-to-top"><img alt="" src="/resources/images/totop.png"/></a>
    <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../../resources/js/jquery.min.js" th:src="@{/resources/js/jquery.min.js}"></script>
    <script src="../../../resources/js/bootstrap.min.js" th:src="@{/resources/js/bootstrap.min.js}"></script>
    <!-- Swiper JS -->
    <script src="../../../resources/js/swiper.min.js" th:src="@{/resources/js/swiper.min.js}"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../../resources/js/ie10-viewport-bug-workaround.js" th:src="@{/resources/js/ie10-viewport-bug-workaround.js}"></script>
    <!-- Initialize Swiper -->
    <script>
    var imageWidth = 1280;
    var imageHeight = 780;
    var preSwiperWidth = 0;
    var preSwiperHeight = 0;
    var swiper;
    var offset = 220;
    var duration = 500;
    jQuery(document).ready(function() {
        updateSwiperContainer();
        swiper = new Swiper('.swiper-container', {
            pagination: '.swiper-pagination',
            paginationClickable: true,
            direction: 'vertical',
            loop: true
        });

        $(window).on('resize', function(){
            updateSwiperContainer();
        });

        jQuery(window).scroll(function() {
            if (jQuery(this).scrollTop() > offset) {
                jQuery('.back-to-top').fadeIn(duration);
            } else {
                jQuery('.back-to-top').fadeOut(duration);
            }
        });

        jQuery('.back-to-top').click(function(event) {
            event.preventDefault();
            jQuery('html, body').animate({scrollTop: 0}, duration);
            return false;
        })

        if (jQuery(this).scrollTop() > offset) {
            jQuery('.back-to-top').fadeIn(duration);
        }
    });

    function updateSwiperContainer() {
        var swiperContainer = $('.swiper-container');
        if (preSwiperWidth != swiperContainer.width() || preSwiperHeight != swiperContainer.height()) {
            var height = Math.floor((imageHeight / imageWidth) * swiperContainer.width());
            swiperContainer.css("height", height);
            if (swiper != null) {
                swiper.onResize();
            }
            preSwiperWidth = swiperContainer.width();
            preSwiperHeight = swiperContainer.height();
        }
    }
    function order(id) {
        window.location.href = "./order?id=" + id;
    }
    </script>
</body>
</html>